<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saved Signatures</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-..." crossorigin="anonymous">
</head>

<body>
  <div class="container mt-5">
    <h1>Saved Signatures</h1>
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Signature</th>
        </tr>
      </thead>
      <tbody id="signature-list">
        <!-- Signatures will be inserted here -->
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-..."
    crossorigin="anonymous"></script>
  <script>
    fetch('/api/signatures')
      .then(res => res.json())
      .then(signatures => {
        const tbody = document.getElementById('signature-list');
        signatures.forEach(sig => {
          const tr = document.createElement('tr');

          // Name
          const nameTd = document.createElement('td');
          nameTd.textContent = sig.name;
          tr.appendChild(nameTd);

          // Email
          const emailTd = document.createElement('td');
          emailTd.textContent = sig.email;
          tr.appendChild(emailTd);

          // Signature Image
          const sigTd = document.createElement('td');
          const img = document.createElement('img');
          img.src = `/uploads/${sig.filename}`;
          img.alt = `Signature of ${sig.name}`;
          img.style.width = "200px";
          img.style.height = "auto";
          sigTd.appendChild(img);
          tr.appendChild(sigTd);

          tbody.appendChild(tr);
        });
      })
      .catch(err => console.error("Error fetching signatures:", err));
  </script>
</body>

</html>